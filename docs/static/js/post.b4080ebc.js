(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["post"],{"0cb2":function(e,t,n){var a=n("7b0b"),r=Math.floor,c="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,i,u,s){var d=n+e.length,f=i.length,b=l;return void 0!==u&&(u=a(u),b=o),c.call(s,b,(function(a,c){var o;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":o=u[c.slice(1,-1)];break;default:var l=+c;if(0===l)return a;if(l>f){var s=r(l/10);return 0===s?a:s<=f?void 0===i[s-1]?c.charAt(1):i[s-1]+c.charAt(1):a}o=i[l-1]}return void 0===o?"":o}))}},1703:function(e,t,n){},"2fcb":function(e,t,n){},"466d":function(e,t,n){"use strict";var a=n("d784"),r=n("825a"),c=n("50c4"),o=n("577e"),l=n("1d80"),i=n("8aa5"),u=n("14c3");a("match",(function(e,t,n){return[function(t){var n=l(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n):new RegExp(t)[e](o(n))},function(e){var a=r(this),l=o(e),s=n(t,a,l);if(s.done)return s.value;if(!a.global)return u(a,l);var d=a.unicode;a.lastIndex=0;var f,b=[],v=0;while(null!==(f=u(a,l))){var p=o(f[0]);b[v]=p,""===p&&(a.lastIndex=i(l,c(a.lastIndex),d)),v++}return 0===v?null:b}]}))},5319:function(e,t,n){"use strict";var a=n("d784"),r=n("d039"),c=n("825a"),o=n("a691"),l=n("50c4"),i=n("577e"),u=n("1d80"),s=n("8aa5"),d=n("0cb2"),f=n("14c3"),b=n("b622"),v=b("replace"),p=Math.max,O=Math.min,j=function(e){return void 0===e?e:String(e)},m=function(){return"$0"==="a".replace(/./,"$0")}(),h=function(){return!!/./[v]&&""===/./[v]("a","$0")}(),g=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var a=h?"$":"$0";return[function(e,n){var a=u(this),r=void 0==e?void 0:e[v];return void 0!==r?r.call(e,a,n):t.call(i(a),e,n)},function(e,r){var u=c(this),b=i(e);if("string"===typeof r&&-1===r.indexOf(a)&&-1===r.indexOf("$<")){var v=n(t,u,b,r);if(v.done)return v.value}var m="function"===typeof r;m||(r=i(r));var h=u.global;if(h){var g=u.unicode;u.lastIndex=0}var w=[];while(1){var x=f(u,b);if(null===x)break;if(w.push(x),!h)break;var C=i(x[0]);""===C&&(u.lastIndex=s(b,l(u.lastIndex),g))}for(var k="",N=0,B=0;B<w.length;B++){x=w[B];for(var V=i(x[0]),y=p(O(o(x.index),b.length),0),S=[],R=1;R<x.length;R++)S.push(j(x[R]));var I=x.groups;if(m){var E=[V].concat(S,y,b);void 0!==I&&E.push(I);var M=i(r.apply(void 0,E))}else M=d(V,b,y,S,I,r);y>=N&&(k+=b.slice(N,y)+M,N=y+V.length)}return k+b.slice(N)}]}),!g||!m||h)},"8b10":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("4d63"),n("ac1f"),n("25f0"),n("a15b"),n("466d");var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){var a=decodeURIComponent(window.location.href),r=1===t.length?new RegExp("[&?]".concat(t[0],"=([^&%#]+)")):new RegExp("[&?](?:".concat(t.join("|"),")=([^&%#]+)")),c=a.match(r);return null===c?void 0:c[1]}}},9608:function(e,t,n){},a15b:function(e,t,n){"use strict";var a=n("23e7"),r=n("44ad"),c=n("fc6a"),o=n("a640"),l=[].join,i=r!=Object,u=o("join",",");a({target:"Array",proto:!0,forced:i||!u},{join:function(e){return l.call(c(this),void 0===e?",":e)}})},d35a:function(e,t,n){"use strict";n("9608")},d4ef:function(e,t,n){},f73c:function(e,t,n){"use strict";n.r(t);n("9a83");var a,r=n("f564"),c=n("7a23"),o=n("6c02"),l=function(){var e=Object(c["ref"])(!1),t=function(){e.value=!1};return{showMore:e,hideMore:t}},i=function(){var e=function(e){return"data:text/paint; utf-8,"+encodeURIComponent(e)};return{getDownloadLink:e}},u=(n("68ef"),n("d4ef"),n("cb51"),n("3743"),n("e3b3"),n("bc1b"),n("1703"),n("a71a"),n("4d75"),n("2fcb"),n("db17")),s=n("c199"),d=n("1da4"),f=n("d282"),b=n("7e3e"),v=n("8da3"),p=n("b1d2"),O=n("ea8e"),j=n("f827"),m=n("e41f"),h=n("b650"),g=n("a6cd"),[w,x]=Object(f["a"])("action-bar"),C=Symbol(w),k=Object(c["defineComponent"])({name:w,props:{safeAreaInsetBottom:u["f"]},setup(e,{slots:t}){var{linkChildren:n}=Object(g["a"])(C);return n(),()=>Object(c["createVNode"])("div",{class:[x(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[null==t.default?void 0:t.default()])}}),N=Object(s["a"])(k),B=n("6ba6"),V=n("4eda"),y=n("b070"),[S,R]=Object(f["a"])("action-bar-button"),I=Object(c["defineComponent"])({name:S,props:Object(u["a"])({},y["a"],{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),setup(e,{slots:t}){var n=Object(y["b"])(),{parent:a,index:r}=Object(B["a"])(C),o=Object(c["computed"])(()=>{if(a){var e=a.children[r.value-1];return!(e&&"isButton"in e)}}),l=Object(c["computed"])(()=>{if(a){var e=a.children[r.value+1];return!(e&&"isButton"in e)}});return Object(V["a"])({isButton:!0}),()=>{var{type:a,icon:r,text:i,color:u,loading:s,disabled:d}=e;return Object(c["createVNode"])(h["a"],{class:R([a,{last:l.value,first:o.value}]),size:"large",type:a,icon:r,color:u,loading:s,disabled:d,onClick:n},{default:()=>[t.default?t.default():i]})}}}),E=Object(s["a"])(I),[M,_,$]=Object(f["a"])("dialog"),T=[...j["a"],"transition","closeOnPopstate"],P=Object(c["defineComponent"])({name:M,props:Object(u["a"])({},j["b"],{title:String,theme:String,width:[Number,String],message:[String,Function],callback:Function,allowHtml:Boolean,className:u["g"],messageAlign:String,closeOnPopstate:u["f"],showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showConfirmButton:u["f"],closeOnClickOverlay:Boolean,transition:{type:String,default:"van-dialog-bounce"}}),emits:["confirm","cancel","update:show"],setup(e,{emit:t,slots:n}){var a=Object(c["reactive"])({confirm:!1,cancel:!1}),r=e=>t("update:show",e),o=t=>{r(!1),e.callback&&e.callback(t)},l=n=>()=>{e.show&&(t(n),e.beforeClose?(a[n]=!0,Object(b["a"])({interceptor:e.beforeClose,args:[n],done(){o(n),a[n]=!1},canceled(){a[n]=!1}})):o(n))},i=l("cancel"),s=l("confirm"),d=()=>{var t=n.title?n.title():e.title;if(t)return Object(c["createVNode"])("div",{class:_("header",{isolated:!e.message&&!n.default})},[t])},f=t=>{var{message:n,allowHtml:a,messageAlign:r}=e,o=_("message",{"has-title":t,[r]:r}),l=Object(v["b"])(n)?n():n;return a&&"string"===typeof l?Object(c["createVNode"])("div",{class:o,innerHTML:l},null):Object(c["createVNode"])("div",{class:o},[l])},j=()=>{if(n.default)return Object(c["createVNode"])("div",{class:_("content")},[n.default()]);var{title:t,message:a,allowHtml:r}=e;if(a){var o=!(!t&&!n.title);return Object(c["createVNode"])("div",{key:r?1:0,class:_("content",{isolated:!o})},[f(o)])}},g=()=>Object(c["createVNode"])("div",{class:[p["d"],_("footer")]},[e.showCancelButton&&Object(c["createVNode"])(h["a"],{size:"large",text:e.cancelButtonText||$("cancel"),class:_("cancel"),style:{color:e.cancelButtonColor},loading:a.cancel,onClick:i},null),e.showConfirmButton&&Object(c["createVNode"])(h["a"],{size:"large",text:e.confirmButtonText||$("confirm"),class:[_("confirm"),{[p["b"]]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:a.confirm,onClick:s},null)]),w=()=>Object(c["createVNode"])(N,{class:_("footer")},{default:()=>[e.showCancelButton&&Object(c["createVNode"])(E,{type:"warning",text:e.cancelButtonText||$("cancel"),class:_("cancel"),color:e.cancelButtonColor,loading:a.cancel,onClick:i},null),e.showConfirmButton&&Object(c["createVNode"])(E,{type:"danger",text:e.confirmButtonText||$("confirm"),class:_("confirm"),color:e.confirmButtonColor,loading:a.confirm,onClick:s},null)]}),x=()=>n.footer?n.footer():"round-button"===e.theme?w():g();return()=>{var{width:t,title:n,theme:a,message:o,className:l}=e;return Object(c["createVNode"])(m["a"],Object(c["mergeProps"])({role:"dialog",class:[_([a]),l],style:{width:Object(O["a"])(t)},"aria-labelledby":n||o},Object(u["e"])(e,T),{"onUpdate:show":r}),{default:()=>[d(),j(),x()]})}}});function A(){var e={setup(){var{state:e,toggle:t}=Object(d["b"])();return()=>Object(c["createVNode"])(P,Object(c["mergeProps"])(e,{"onUpdate:show":t}),null)}};({instance:a}=Object(d["a"])(e))}function z(e){return u["c"]?new Promise((t,n)=>{a||A(),a.open(Object(u["a"])({},z.currentOptions,e,{callback:e=>{("confirm"===e?t:n)(e)}}))}):Promise.resolve()}z.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},z.currentOptions=Object(u["a"])({},z.defaultOptions),z.alert=z,z.confirm=e=>z(Object(u["a"])({showCancelButton:!0},e)),z.close=()=>{a&&a.toggle(!1)},z.setDefaultOptions=e=>{Object(u["a"])(z.currentOptions,e)},z.resetDefaultOptions=()=>{z.currentOptions=Object(u["a"])({},z.defaultOptions)},z.Component=Object(s["a"])(P),z.install=e=>{e.use(z.Component),e.config.globalProperties.$dialog=z};var H=z,L=n("1da1"),U=(n("96cf"),n("ac1f"),n("1276"),n("5319"),n("e762")),D=n("9073"),F=n("8b10"),q=n("5cde"),J=function(e){var t="## 在此编辑您的内容",n="",a=Object(c["ref"])(""),l=Object(c["ref"])(""),i=Object(D["a"])(),u=i.fileMetaList,s=i.onImportFiles,d=Object(o["c"])(),f=Object(c["computed"])((function(){var e=a.value.split("\n")[0];return"#"==e[0]?e.replace(/#+ /g,""):e})),b=function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(n){var c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e(),t.next=3,s(n);case 3:o=null===(c=u.value[0])||void 0===c?void 0:c.content,o?a.value=o:Object(r["a"])("读取文件出现错误");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!l.value){e.next=6;break}return e.next=4,Object(q["f"])({noteContent:a.value,postId:l.value});case 4:e.next=11;break;case 6:return e.next=8,Object(q["a"])(a.value);case 8:t=e.sent,l.value=t.objectId,d.replace("/post?id="+l.value);case 11:n=a.value,Object(r["a"])({type:"success",message:"保存成功",duration:800}),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),Object(r["a"])("保存失败：".concat(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var t=Object(L["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,H.confirm({title:"确定要删除笔记吗？",message:"该操作不可恢复"});case 2:if(n=t.sent,n){t.next=6;break}return e(),t.abrupt("return");case 6:if(t.prev=6,!l.value){t.next=10;break}return t.next=10,Object(q["b"])(l.value);case 10:Object(r["a"])({type:"success",message:"笔记已删除"}),d.push("/notes"),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](6),Object(r["a"])("删除失败：".concat(t.t0));case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value!=t&&a.value!=n){e.next=4;break}return e.abrupt("return",!0);case 4:return e.prev=4,e.next=7,H.confirm({title:"确认返回吗？",message:"笔记不会自动保存哦"});case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e["catch"](4),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return Object(c["onBeforeMount"])(Object(L["a"])(regeneratorRuntime.mark((function e(){var c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=Object(F["a"])("id"),!c){e.next=18;break}return l.value=c,e.prev=3,e.next=6,Object(q["c"])(c);case 6:o=e.sent,a.value=Object(U["a"])(o.content),n=a.value,e.next=16;break;case 11:e.prev=11,e.t0=e["catch"](3),console.log(e.t0),d.replace("/notes"),Object(r["a"])("".concat(e.t0));case 16:e.next=19;break;case 18:a.value=t;case 19:case"end":return e.stop()}}),e,null,[[3,11]])})))),{text:a,saveFileName:f,onSave:v,handleDelete:p,afterRead:b,checkIfSave:O}},G=n("d0f0");Object(c["pushScopeId"])("data-v-07bd8290");var K={class:"editor-wrap"},Q={class:"v-md-editor-wrap"},W={class:"uploader-wrap"},X=Object(c["createTextVNode"])(" 导入笔记 "),Y=Object(c["createElementVNode"])("div",{class:"uploader-warn van-action-sheet__subname"}," 导入笔记将覆盖您当前输入的内容 ",-1),Z=["download","href"],ee=Object(c["createElementVNode"])("button",{class:"van-action-sheet__item"},"导出笔记",-1),te=[ee];Object(c["popScopeId"])();var ne=Object(c["defineComponent"])({setup:function(e){var t=function(){var e=Object(c["ref"])("edit"),t=Object(c["computed"])((function(){return"edit"===e.value})),n=function(){e.value="edit"===e.value?"preview":"edit"};return{mode:e,isEdit:t,showPreview:n}},n=function(){var e=Object(c["ref"])("calc(100vh - var(--van-nav-bar-height))"),t=Object(c["ref"])(!1),n=Object(c["ref"])(null),a=function(){t.value&&Object(r["a"])("滚动啦")},o=function(){setTimeout((function(){t.value=!0,e.value="50vh"}),300)},l=function(){setTimeout((function(){t.value=!1,e.value="calc(100vh - var(--van-nav-bar-height))"}),300)};return Object(c["onMounted"])((function(){var e=document.querySelector(".CodeMirror-code");null!==e&&(e.addEventListener("focus",o),e.addEventListener("blur",l)),null!=n.value&&(console.log(n.value),n.value.addEventListener("scroll",a))})),{editorHeight:e}},a=i(),u=a.getDownloadLink,s=l(),d=s.showMore,f=s.hideMore,b=J(f),v=b.text,p=b.saveFileName,O=b.onSave,j=b.handleDelete,m=b.afterRead,h=b.checkIfSave,g=t(),w=g.mode,x=g.isEdit,C=g.showPreview,k=n(),N=k.editorHeight,B=Object(o["c"])(),V=function(){h().then((function(e){1==e&&B.push("/notes")}))};return Object(c["onMounted"])((function(){window.onbeforeunload=function(){var e="你确定要关闭吗？";return e}})),Object(c["onBeforeUnmount"])((function(){window.onbeforeunload=null})),function(e,t){var n=Object(c["resolveComponent"])("van-button"),a=Object(c["resolveComponent"])("van-nav-bar"),r=Object(c["resolveComponent"])("v-md-editor"),o=Object(c["resolveComponent"])("van-uploader"),l=Object(c["resolveComponent"])("van-action-sheet");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",K,[Object(c["createVNode"])(a,{title:"MyNote"},{left:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(n,{size:"small",onClick:V},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(G["a"],{name:"back"})]})),_:1})]})),right:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(n,{size:"small",onClick:t[0]||(t[0]=function(e){return d.value=!0})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(G["a"],{name:"showMore"})]})),_:1}),Object(c["createVNode"])(n,{size:"small",onClick:Object(c["unref"])(C)},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(G["a"],{name:"showPreview",active:Object(c["unref"])(x)},null,8,["active"])]})),_:1},8,["onClick"]),Object(c["createVNode"])(n,{size:"small",onClick:Object(c["unref"])(O)},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(G["a"],{name:"save"})]})),_:1},8,["onClick"])]})),_:1}),Object(c["createElementVNode"])("div",Q,[Object(c["createVNode"])(r,{modelValue:Object(c["unref"])(v),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(c["isRef"])(v)?v.value=e:null}),mode:Object(c["unref"])(w),height:Object(c["unref"])(N),"left-toolbar":"undo redo | toc | ul ol quote table link code | clear","right-toolbar":""},null,8,["modelValue","mode","height"])]),Object(c["createVNode"])(l,{show:Object(c["unref"])(d),"onUpdate:show":t[3]||(t[3]=function(e){return Object(c["isRef"])(d)?d.value=e:null}),"cancel-text":"取消","close-on-click-action":"","safe-area-inset-bottom":""},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("label",W,[Object(c["createVNode"])(o,{accept:".md, .txt","after-read":Object(c["unref"])(m)},{default:Object(c["withCtx"])((function(){return[X]})),_:1},8,["after-read"]),Y]),Object(c["createElementVNode"])("a",{class:"export-wrap",download:Object(c["unref"])(p),href:Object(c["unref"])(u)(Object(c["unref"])(v))},te,8,Z),Object(c["createElementVNode"])("button",{class:"van-action-sheet__item",style:{color:"red"},onClick:t[2]||(t[2]=function(){return Object(c["unref"])(j)&&Object(c["unref"])(j).apply(void 0,arguments)})}," 删除笔记 ")]})),_:1},8,["show"])])}}});n("d35a");ne.__scopeId="data-v-07bd8290";t["default"]=ne}}]);