(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["post"],{"0cb2":function(e,t,n){var a=n("7b0b"),c=Math.floor,r="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,i=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,l,u,s){var d=n+e.length,f=l.length,b=i;return void 0!==u&&(u=a(u),b=o),r.call(s,b,(function(a,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":o=u[r.slice(1,-1)];break;default:var i=+r;if(0===i)return a;if(i>f){var s=c(i/10);return 0===s?a:s<=f?void 0===l[s-1]?r.charAt(1):l[s-1]+r.charAt(1):a}o=l[i-1]}return void 0===o?"":o}))}},1703:function(e,t,n){},"2fcb":function(e,t,n){},"466d":function(e,t,n){"use strict";var a=n("d784"),c=n("825a"),r=n("50c4"),o=n("577e"),i=n("1d80"),l=n("8aa5"),u=n("14c3");a("match",(function(e,t,n){return[function(t){var n=i(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n):new RegExp(t)[e](o(n))},function(e){var a=c(this),i=o(e),s=n(t,a,i);if(s.done)return s.value;if(!a.global)return u(a,i);var d=a.unicode;a.lastIndex=0;var f,b=[],v=0;while(null!==(f=u(a,i))){var p=o(f[0]);b[v]=p,""===p&&(a.lastIndex=l(i,r(a.lastIndex),d)),v++}return 0===v?null:b}]}))},5319:function(e,t,n){"use strict";var a=n("d784"),c=n("d039"),r=n("825a"),o=n("a691"),i=n("50c4"),l=n("577e"),u=n("1d80"),s=n("8aa5"),d=n("0cb2"),f=n("14c3"),b=n("b622"),v=b("replace"),p=Math.max,O=Math.min,m=function(e){return void 0===e?e:String(e)},j=function(){return"$0"==="a".replace(/./,"$0")}(),h=function(){return!!/./[v]&&""===/./[v]("a","$0")}(),g=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var a=h?"$":"$0";return[function(e,n){var a=u(this),c=void 0==e?void 0:e[v];return void 0!==c?c.call(e,a,n):t.call(l(a),e,n)},function(e,c){var u=r(this),b=l(e);if("string"===typeof c&&-1===c.indexOf(a)&&-1===c.indexOf("$<")){var v=n(t,u,b,c);if(v.done)return v.value}var j="function"===typeof c;j||(c=l(c));var h=u.global;if(h){var g=u.unicode;u.lastIndex=0}var w=[];while(1){var x=f(u,b);if(null===x)break;if(w.push(x),!h)break;var C=l(x[0]);""===C&&(u.lastIndex=s(b,i(u.lastIndex),g))}for(var k="",N=0,B=0;B<w.length;B++){x=w[B];for(var y=l(x[0]),V=p(O(o(x.index),b.length),0),S=[],P=1;P<x.length;P++)S.push(m(x[P]));var I=x.groups;if(j){var R=[y].concat(S,V,b);void 0!==I&&R.push(I);var _=l(c.apply(void 0,R))}else _=d(y,b,V,S,I,c);V>=N&&(k+=b.slice(N,V)+_,N=V+y.length)}return k+b.slice(N)}]}),!g||!j||h)},"86e7":function(e,t,n){},"8b10":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("4d63"),n("ac1f"),n("25f0"),n("a15b"),n("466d");var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){var a=decodeURIComponent(window.location.href),c=1===t.length?new RegExp("[&?]".concat(t[0],"=([^&%#]+)")):new RegExp("[&?](?:".concat(t.join("|"),")=([^&%#]+)")),r=a.match(c);return null===r?void 0:r[1]}}},"95a6":function(e,t,n){"use strict";n.r(t);var a,c=n("7a23"),r=n("6c02"),o=function(){var e=Object(c["ref"])(!1),t=function(){e.value=!1};return{showMore:e,hideMore:t}},i=function(){var e=function(e){return"data:text/paint; utf-8,"+encodeURIComponent(e)};return{getDownloadLink:e}},l=(n("68ef"),n("d4ef"),n("cb51"),n("3743"),n("e3b3"),n("bc1b"),n("1703"),n("a71a"),n("4d75"),n("2fcb"),n("db17")),u=n("c199"),s=n("1da4"),d=n("d282"),f=n("7e3e"),b=n("8da3"),v=n("b1d2"),p=n("ea8e"),O=n("f827"),m=n("e41f"),j=n("b650"),h=n("a6cd"),[g,w]=Object(d["a"])("action-bar"),x=Symbol(g),C=Object(c["defineComponent"])({name:g,props:{safeAreaInsetBottom:l["f"]},setup(e,{slots:t}){var{linkChildren:n}=Object(h["a"])(x);return n(),()=>Object(c["createVNode"])("div",{class:[w(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[null==t.default?void 0:t.default()])}}),k=Object(u["a"])(C),N=n("6ba6"),B=n("4eda"),y=n("b070"),[V,S]=Object(d["a"])("action-bar-button"),P=Object(c["defineComponent"])({name:V,props:Object(l["a"])({},y["a"],{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),setup(e,{slots:t}){var n=Object(y["b"])(),{parent:a,index:r}=Object(N["a"])(x),o=Object(c["computed"])(()=>{if(a){var e=a.children[r.value-1];return!(e&&"isButton"in e)}}),i=Object(c["computed"])(()=>{if(a){var e=a.children[r.value+1];return!(e&&"isButton"in e)}});return Object(B["a"])({isButton:!0}),()=>{var{type:a,icon:r,text:l,color:u,loading:s,disabled:d}=e;return Object(c["createVNode"])(j["a"],{class:S([a,{last:i.value,first:o.value}]),size:"large",type:a,icon:r,color:u,loading:s,disabled:d,onClick:n},{default:()=>[t.default?t.default():l]})}}}),I=Object(u["a"])(P),[R,_,$]=Object(d["a"])("dialog"),E=[...O["a"],"transition","closeOnPopstate"],M=Object(c["defineComponent"])({name:R,props:Object(l["a"])({},O["b"],{title:String,theme:String,width:[Number,String],message:[String,Function],callback:Function,allowHtml:Boolean,className:l["g"],messageAlign:String,closeOnPopstate:l["f"],showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showConfirmButton:l["f"],closeOnClickOverlay:Boolean,transition:{type:String,default:"van-dialog-bounce"}}),emits:["confirm","cancel","update:show"],setup(e,{emit:t,slots:n}){var a=Object(c["reactive"])({confirm:!1,cancel:!1}),r=e=>t("update:show",e),o=t=>{r(!1),e.callback&&e.callback(t)},i=n=>()=>{e.show&&(t(n),e.beforeClose?(a[n]=!0,Object(f["a"])({interceptor:e.beforeClose,args:[n],done(){o(n),a[n]=!1},canceled(){a[n]=!1}})):o(n))},u=i("cancel"),s=i("confirm"),d=()=>{var t=n.title?n.title():e.title;if(t)return Object(c["createVNode"])("div",{class:_("header",{isolated:!e.message&&!n.default})},[t])},O=t=>{var{message:n,allowHtml:a,messageAlign:r}=e,o=_("message",{"has-title":t,[r]:r}),i=Object(b["b"])(n)?n():n;return a&&"string"===typeof i?Object(c["createVNode"])("div",{class:o,innerHTML:i},null):Object(c["createVNode"])("div",{class:o},[i])},h=()=>{if(n.default)return Object(c["createVNode"])("div",{class:_("content")},[n.default()]);var{title:t,message:a,allowHtml:r}=e;if(a){var o=!(!t&&!n.title);return Object(c["createVNode"])("div",{key:r?1:0,class:_("content",{isolated:!o})},[O(o)])}},g=()=>Object(c["createVNode"])("div",{class:[v["d"],_("footer")]},[e.showCancelButton&&Object(c["createVNode"])(j["a"],{size:"large",text:e.cancelButtonText||$("cancel"),class:_("cancel"),style:{color:e.cancelButtonColor},loading:a.cancel,onClick:u},null),e.showConfirmButton&&Object(c["createVNode"])(j["a"],{size:"large",text:e.confirmButtonText||$("confirm"),class:[_("confirm"),{[v["b"]]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:a.confirm,onClick:s},null)]),w=()=>Object(c["createVNode"])(k,{class:_("footer")},{default:()=>[e.showCancelButton&&Object(c["createVNode"])(I,{type:"warning",text:e.cancelButtonText||$("cancel"),class:_("cancel"),color:e.cancelButtonColor,loading:a.cancel,onClick:u},null),e.showConfirmButton&&Object(c["createVNode"])(I,{type:"danger",text:e.confirmButtonText||$("confirm"),class:_("confirm"),color:e.confirmButtonColor,loading:a.confirm,onClick:s},null)]}),x=()=>n.footer?n.footer():"round-button"===e.theme?w():g();return()=>{var{width:t,title:n,theme:a,message:o,className:i}=e;return Object(c["createVNode"])(m["a"],Object(c["mergeProps"])({role:"dialog",class:[_([a]),i],style:{width:Object(p["a"])(t)},"aria-labelledby":n||o},Object(l["e"])(e,E),{"onUpdate:show":r}),{default:()=>[d(),h(),x()]})}}});function A(){var e={setup(){var{state:e,toggle:t}=Object(s["b"])();return()=>Object(c["createVNode"])(M,Object(c["mergeProps"])(e,{"onUpdate:show":t}),null)}};({instance:a}=Object(s["a"])(e))}function T(e){return l["c"]?new Promise((t,n)=>{a||A(),a.open(Object(l["a"])({},T.currentOptions,e,{callback:e=>{("confirm"===e?t:n)(e)}}))}):Promise.resolve()}T.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},T.currentOptions=Object(l["a"])({},T.defaultOptions),T.alert=T,T.confirm=e=>T(Object(l["a"])({showCancelButton:!0},e)),T.close=()=>{a&&a.toggle(!1)},T.setDefaultOptions=e=>{Object(l["a"])(T.currentOptions,e)},T.resetDefaultOptions=()=>{T.currentOptions=Object(l["a"])({},T.defaultOptions)},T.Component=Object(u["a"])(M),T.install=e=>{e.use(T.Component),e.config.globalProperties.$dialog=T};var z=T,U=(n("9a83"),n("f564")),F=n("1da1"),H=(n("96cf"),n("ac1f"),n("1276"),n("5319"),n("d3b7"),n("e762")),D=n("9073"),L=n("8b10"),J=n("5cde"),q=function(e){var t="## 在此编辑您的内容",n="",a=Object(c["ref"])(""),o=Object(c["ref"])(""),i=Object(D["a"])(),l=i.fileMetaList,u=i.onImportFiles,s=Object(r["c"])(),d=Object(c["reactive"])({isImporting:!1,isSaving:!1,isPublicing:!1,isPinning:!1}),f=Object(c["computed"])((function(){var e=a.value.split("\n")[0];return"#"==e[0]?e.replace(/#+ /g,""):e})),b=function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(t){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d.isImporting=!0,e.next=3,u(t);case 3:c=null===(n=l.value[0])||void 0===n?void 0:n.content,c?a.value=c:Object(U["a"])("读取文件出现错误"),d.isImporting=!1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.isSaving=!0,e.prev=1,!o.value){e.next=7;break}return e.next=5,Object(J["g"])({noteContent:a.value,postId:o.value});case 5:e.next=12;break;case 7:return e.next=9,Object(J["a"])(a.value);case 9:t=e.sent,o.value=t.objectId,s.replace("/post?id="+o.value);case 12:n=a.value,Object(U["a"])({type:"success",message:"保存成功",duration:800}),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](1),Object(U["a"])("保存失败：".concat(e.t0));case 19:d.isSaving=!1;case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=function(e){return new Promise((function(t){"confirm"===e?o.value?Object(J["b"])(o.value).then((function(){Object(U["a"])({type:"success",message:"操作成功：笔记已删除"}),s.push("/notes")})).catch((function(e){Object(U["a"])("删除失败：".concat(e))})).finally((function(){t(!0)})):(Object(U["a"])("删除失败：笔记未保存，不需要删除"),t(!0)):t(!0)}))};z.confirm({title:"确定要删除笔记吗？",message:"该操作不可恢复",beforeClose:e})},O=function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.isPublicing=!0,e.prev=1,!o.value){e.next=8;break}return e.next=5,Object(J["f"])(o.value);case 5:Object(U["a"])({type:"success",message:"笔记已公开"}),e.next=9;break;case 8:Object(U["a"])("请先保存笔记");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),Object(U["a"])("".concat(e.t0));case 14:d.isPublicing=!1;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.isPinning=!0,e.prev=1,!o.value){e.next=8;break}return e.next=5,Object(J["e"])(o.value);case 5:Object(U["a"])({type:"success",message:"笔记置顶成功"}),e.next=9;break;case 8:Object(U["a"])("请先保存笔记");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),Object(U["a"])("".concat(e.t0));case 14:d.isPinning=!1;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value!=t&&a.value!=n){e.next=4;break}return e.abrupt("return",!0);case 4:return e.prev=4,e.next=7,z.confirm({title:"确认返回吗？",message:"笔记不会自动保存哦"});case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e["catch"](4),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return Object(c["onBeforeMount"])(Object(F["a"])(regeneratorRuntime.mark((function c(){var r,i;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(r=Object(L["a"])("id"),!r){c.next=18;break}return o.value=r,c.prev=3,c.next=6,Object(J["c"])(r);case 6:i=c.sent,a.value=Object(H["a"])(i.content),n=a.value,c.next=16;break;case 11:c.prev=11,c.t0=c["catch"](3),console.log(c.t0),s.replace("/notes"),Object(U["a"])("".concat(c.t0));case 16:c.next=20;break;case 18:e.value="edit",a.value=t;case 20:case"end":return c.stop()}}),c,null,[[3,11]])})))),{text:a,saveFileName:f,status:d,handlePin:m,handlePublic:O,handleSave:v,deleteNote:p,importNote:b,checkIfSaved:j}},G=n("d0f0");Object(c["pushScopeId"])("data-v-cd564430");var K={class:"editor-wrap"},Q={class:"v-md-editor-wrap"},W={class:"uploader-wrap"},X=Object(c["createTextVNode"])(" 导入笔记 "),Y=Object(c["createElementVNode"])("div",{class:"uploader-warn van-action-sheet__subname"}," 导入笔记将覆盖您当前输入的内容 ",-1),Z=["download","href"];Object(c["popScopeId"])();var ee=Object(c["defineComponent"])({setup:function(e){var t=function(){var e=Object(c["ref"])("preview"),t=Object(c["computed"])((function(){return"edit"===e.value})),n=function(){e.value="edit"===e.value?"preview":"edit"};return{mode:e,isEdit:t,showPreview:n}},n=Object(c["ref"])("calc(100vh - var(--van-nav-bar-height))"),a=i(),l=a.getDownloadLink,u=o(),s=u.showMore,d=t(),f=d.mode,b=d.isEdit,v=d.showPreview,p=q(f),O=p.text,m=p.status,j=p.saveFileName,h=(p.handlePin,p.handlePublic,p.handleSave),g=p.deleteNote,w=p.importNote,x=p.checkIfSaved,C=Object(r["c"])(),k=function(){x().then((function(e){1==e&&C.push("/notes")}))},N=function(e){s.value=!1,w(e)},B=function(){s.value=!1,g()};return Object(c["onMounted"])((function(){window.onbeforeunload=function(){var e="你确定要关闭吗？";return e}})),Object(c["onBeforeUnmount"])((function(){window.onbeforeunload=null})),function(e,t){var a=Object(c["resolveComponent"])("van-button"),r=Object(c["resolveComponent"])("van-nav-bar"),o=Object(c["resolveComponent"])("v-md-editor"),i=Object(c["resolveComponent"])("van-uploader"),u=Object(c["resolveComponent"])("van-action-sheet");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",K,[Object(c["createVNode"])(r,{title:"MyNote"},{left:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{size:"small",onClick:k},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(G["a"],{name:"back"})]})),_:1})]})),right:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{size:"small",onClick:t[0]||(t[0]=function(e){return s.value=!0})},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(G["a"],{name:"showMore"})]})),_:1}),Object(c["createVNode"])(a,{size:"small",onClick:Object(c["unref"])(v)},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(G["a"],{name:"showPreview",active:Object(c["unref"])(b)},null,8,["active"])]})),_:1},8,["onClick"]),Object(c["createVNode"])(a,{size:"small",onClick:Object(c["unref"])(h)},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(G["a"],{name:"save",loading:Object(c["unref"])(m).isSaving},null,8,["loading"])]})),_:1},8,["onClick"])]})),_:1}),Object(c["createElementVNode"])("div",Q,[Object(c["createVNode"])(o,{modelValue:Object(c["unref"])(O),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(c["isRef"])(O)?O.value=e:null}),mode:Object(c["unref"])(f),height:n.value,"left-toolbar":"undo redo | toc | ul ol quote table link code | clear","right-toolbar":""},null,8,["modelValue","mode","height"])]),Object(c["createVNode"])(u,{show:Object(c["unref"])(s),"onUpdate:show":t[3]||(t[3]=function(e){return Object(c["isRef"])(s)?s.value=e:null}),"cancel-text":"取消","close-on-click-action":"","safe-area-inset-bottom":""},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("label",W,[Object(c["createVNode"])(i,{accept:".md, .txt","after-read":N},{default:Object(c["withCtx"])((function(){return[X]})),_:1}),Y]),Object(c["createElementVNode"])("a",{class:"export-wrap",download:Object(c["unref"])(j),href:Object(c["unref"])(l)(Object(c["unref"])(O))},[Object(c["createElementVNode"])("button",{class:"van-action-sheet__item",onClick:t[2]||(t[2]=function(e){return s.value=!1})},"导出笔记")],8,Z),Object(c["createElementVNode"])("button",{class:"van-action-sheet__item",style:{color:"red"},onClick:B}," 删除笔记 ")]})),_:1},8,["show"])])}}});n("cd0d");ee.__scopeId="data-v-cd564430";t["default"]=ee},a15b:function(e,t,n){"use strict";var a=n("23e7"),c=n("44ad"),r=n("fc6a"),o=n("a640"),i=[].join,l=c!=Object,u=o("join",",");a({target:"Array",proto:!0,forced:l||!u},{join:function(e){return i.call(r(this),void 0===e?",":e)}})},cd0d:function(e,t,n){"use strict";n("86e7")},d4ef:function(e,t,n){}}]);